!function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){var n=a(2),o=a(3),r=a(11),i=a(1)("main.js");i.verbose("Kicking off initial render!"),o.render(n.createElement(r,{name:"Player 1"}),document.getElementById("mount-main"))},function(e,t,a){function n(e,t){if(!t)return void console.log(e);var a=new Date,n=a.getFullYear(),o=a.getMonth()+1,r=a.getDate(),i=a.getHours(),s=a.getMinutes(),c=a.getSeconds();console.log("["+n+"."+o+"."+r+"."+i+"."+s+"."+c+"] "+e)}var o=a(5).DEBUG,r=a(5).VERBOSE;e.exports=function(e,t){return{logSource:e?e:"Unknown source",withTimestamp:t,out:function(e){var t=e+" ("+this.logSource+")";n(t,this.withTimestamp)},debug:function(e){if(o){var t="DEBUG: "+e+" ("+this.logSource+")";n(t,this.withTimestamp)}},warn:function(e){var t="! ! ! WARNING ! ! ! : "+e+" ("+this.logSource+")";n(t,this.withTimestamp)},error:function(e){var t="X X X ERROR X X X : "+e+" ("+this.logSource+")";n(t,this.withTimestamp)},verbose:function(e){if(o&&r){var t="VERBOSE: "+e+" ("+this.logSource+")";n(t,this.withTimestamp)}}}}},function(e,t){e.exports=react},function(e,t){e.exports=reactDOM},function(e,t){var a={};a.acctTypeBanned="banned",a.acctTypeDeleted="deleted",a.acctTypeModerator="moderator",a.acctTypeRegistered="registered",a.acctTypeVisitor="visitor",a.cookieExpiry={maxAge:12096e5,httpOnly:!0},a.cookieNode="node_uid",a.cookieSession="session_uid",a.defaultNodeUid="default",a.defaultParentUid="00000000000000-0000000000-00000000000000",a.defaultUserName="Visitor",a.defaultTrailingSnippet="... and then the user sat down in front of the keyboard, and had to make a choice.",a.defaultLastPath="The user visits CYOAG.",a.defaultNodeSnippet="You have come to CYOAG, a unique Create Your Own Adventure Game experience!  Here you will enjoy the results of collaborative efforts by writers from all across the world to write one story of many paths and branches, together! (The CYOAG experience is still loading.)",a.displayNameBanned="[-banned-]",a.displayNameDeleted="[-deleted-]",a.displayNameUnknown="[-unknown-]",a.emptyString="",a.envLocal="local",a.envProd="prod",a.errorNodeUid="error",a.errorUserName="Visitor",a.errorTrailingSnippet="... and it had been a long night, and the CYOAG development team was really tired.",a.errorLastPath="The developer makes a horrible mistake.",a.errorNodeSnippet="It looks like the CYOAG developers have done something wrong and led you here.  What did they do wrong, you might ask ... ?  Well, let me tell you!",a.hostDomainLocal="http://localhost.cyoag.com:3000/",a.hostDomainProd="https://cyoag.com/",a.inputBlockingHide="hide",a.messageRegularClass="cyoag-regular-message",a.messageWarningClass="cyoag-warning-message",a.messageErrorClass="cyoag-error-message",a.modalTypeMessage="cyoag-modal-type-message",a.modalTypeWarning="cyoag-modal-type-warning",a.modalTypeError="cyoag-modal-type-error",a.portLocal=3e3,a.portProd=80,a.portHttps=443,a.rootNodeUid="start",a.rootTrailingSnippet="... a cold wind blows.",a.rootLastPath="The writer takes up his pen.",a.trailingSnippetLength=200,a.visitorName="Illustrious Visitor",a.votificationNone="none",a.votificationUp="up",a.votificationDown="down",e.exports=a},function(e,t,a){var n=a(4),o=a(17),r={};switch(r.DEBUG=!0,r.VERBOSE=!0,r.env=n.envLocal,r.env){case n.envLocal:r.hostDomain=n.hostDomainLocal,r.httpPort=3e3,r.httpsPrivKeyLocation=o.httpsPrivKeyLocation_local,r.httpsFullChainLocation=o.httpsFullChainLocation_local,r.httpsChainLocation=o.httpsChainLocation_local;break;case n.envProd:r.hostDomain=n.hostDomainProd,r.httpPort=80,r.httpsPrivKeyLocation=o.httpsPrivKeyLocation,r.httpsFullChainLocation=o.httpsFullChainLocation,r.httpsChainLocation=o.httpsChainLocation,r.DEBUG=!1;break;default:r.hostDomain=n.hostDomainLocal,r.httpPort=3e3,r.httpsPrivKeyLocation=o.httpsPrivKeyLocation_local,r.httpsFullChainLocation=o.httpsFullChainLocation_local,r.httpsChainLocation=o.httpsChainLocation_local}e.exports=r},function(e,t,a){var n=a(2),t=(a(3),a(1)("SocialLoginButtonComponents.js"),{}),o=n.createClass({displayName:"FacebookButton",render:function(){return n.createElement("div",{className:"cyoag-fb-login cyoag-inline-block"},n.createElement("a",{className:"cyoag-link",href:"/fb/login"},"Facebook"))}}),r=n.createClass({displayName:"TwitterButton",render:function(){return n.createElement("div",{className:"cyoag-tw-button cyoag-inline-block"},n.createElement("a",{className:"cyoag-link",href:"/tw/login"},"Twitter"))}}),i=n.createClass({displayName:"LogoutButton",render:function(){return n.createElement("button",{id:"cyoag-logout-button",onClick:this.props.logoutRequest},"Log Out")}});t.FacebookButton=o,t.TwitterButton=r,t.LogoutButton=i,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4),a(1)("FooterComponents.js")),t={},r=n.createClass({displayName:"Footer",render:function(){return o.verbose("Rendering..."),n.createElement("div",{id:"cyoag-footer-container"},n.createElement("h1",null,"Footer"),n.createElement("p",null,"Special thanks and copyright notice (C)!"))}});t.Footer=r,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4),a(1)("HeaderComponents.js")),t={},r=n.createClass({displayName:"Header",render:function(){return o.verbose("Rendering..."),n.createElement("div",{id:"cyoag-header-container"},n.createElement("h1",null,"Header"),n.createElement("a",{href:"https://stevenkitzes.github.io/cyoag/docs/functional-requirements.html"},"Docs")," | ",n.createElement("a",{href:"http://www.google.com"},"Google"))}});t.Header=r,e.exports=t},function(e,t,a){var n=a(2),t=(a(3),a(4),a(1)("PathComponents.js"),{}),o=n.createClass({displayName:"Hidden",render:function(){return n.createElement("div",{id:"cyoag-input-container",className:"cyoag-hidden"})}}),r=n.createClass({displayName:"Blocked",render:function(){return this.props.blocking.top&&this.props.blocking.side?n.createElement("div",{id:"cyoag-input-container"},n.createElement("p",{id:"cyoag-input-blocked-message"},"(You may not add paths to your own chapters, or chapters that you have already added paths to!)")):this.props.blocking.top?n.createElement("div",{id:"cyoag-input-container"},n.createElement("p",{id:"cyoag-input-blocked-message"},"(You may not add paths to your own chapters!)")):n.createElement("div",{id:"cyoag-input-container"},n.createElement("p",{id:"cyoag-input-blocked-message"},"(You may not add multiple paths to the same chapter!)"))}}),i=n.createClass({displayName:"Input",getInitialState:function(){return{pathCharCount:0,bodyCharCount:0}},render:function(){return n.createElement("div",{id:"cyoag-input-container"},n.createElement("p",{id:"cyoag-input-cta"},n.createElement("em",null,"Want to add your own content following this chapter?")),n.createElement("div",{id:"cyoag-input-path-container"},"Enter the path teaser for your new chapter:",n.createElement("br",null),n.createElement("textarea",{id:"cyoag-input-path",type:"text",onKeyUp:this.updatePathCharCount,placeholder:"Path snippet - minimum 4 characters, maximum 100 characters."}),n.createElement("div",{id:"cyoag-path-char-hint"},n.createElement(s,{count:this.state.pathCharCount}))),n.createElement("div",{id:"cyoag-input-body-container"},"Enter the body of your new chapter:",n.createElement("br",null),n.createElement("textarea",{id:"cyoag-input-body",type:"text",onKeyUp:this.updateBodyCharCount,placeholder:"Chapter content - minimum 1000 characters, maximum 5000 characters."}),n.createElement("div",{id:"cyoag-input-body-hints-container"},n.createElement("div",{id:"cyoag-body-char-hint"},n.createElement(c,{count:this.state.bodyCharCount})),n.createElement("div",{className:"cyoag-resize-input-hint cyoag-note"},"Drag to resize! ^"))),n.createElement("button",{id:"cyoag-save-draft-submit",onClick:this.saveDraft},"Save Draft"),n.createElement("button",{id:"cyoag-input-submit",onClick:this.submit},"Submit"))},saveDraft:function(){var e=document.getElementById("cyoag-input-path").value||"",t=document.getElementById("cyoag-input-body").value||"";return t.length>5e3?void this.props.context.message({warning:"Sorry, drafts of over 5,000 characters are not permitted."}):void this.props.context.saveDraft(e,t)},submit:function(){var e,t=document.getElementById("cyoag-input-path").value,a=document.getElementById("cyoag-input-body").value;this.props.context.message;return t.length<4?e="Your path teaser must be at least 4 characters long":t.length>100&&(e="Your path teaser may not exceed 100 characters"),a.length<1e3?e?e+=" and your chapter content must be at least 1,000 characters long":e="Your chapter content must be at least 1,000 characters long":a.length>5e3&&(e?e+=" and your chapter content may not exceed 5,000 characters":e="Your chapter content may not exceed 5,000 characters"),e?(e+=".",void this.props.context.message({warning:e})):void this.props.context.inputSubmit(t,a)},updateBodyCharCount:function(){this.setState({bodyCharCount:document.getElementById("cyoag-input-body").value.length})},updatePathCharCount:function(){this.setState({pathCharCount:document.getElementById("cyoag-input-path").value.length})}}),s=n.createClass({displayName:"PathHint",render:function(){var e=this.props.count;return e<4?n.createElement("span",{className:"cyoag-note-red"},"Too few characters: ",e):e>100?n.createElement("span",{className:"cyoag-note-red"},"Too many characters: ",e):n.createElement("span",{className:"cyoag-note-green"},"Characters: ",e)}}),c=n.createClass({displayName:"BodyHint",render:function(){var e=this.props.count;return e<1e3?n.createElement("span",{className:"cyoag-note-red"},"Too few characters: ",e):e>5e3?n.createElement("span",{className:"cyoag-note-red"},"Too many characters: ",e):n.createElement("span",{className:"cyoag-note-green"},"Characters: ",e)}});t.Hidden=o,t.Blocked=r,t.Input=i,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4)),r=a(1)("MainColumnComponents.js"),i=a(14),s=a(16),c=a(15),l=a(9),t={},u=n.createClass({displayName:"MainColumn",render:function(){r.verbose("Rendering...");var e,t=this.props.context;e=t.state.acctType!=o.acctTypeVisitor?n.createElement(s.Votification,{context:t}):n.createElement(s.BegLogin,{context:t});var a;return a=t.state.acctType==o.acctTypeVisitor||t.state.inputBlocking==o.inputBlockingHide?n.createElement(l.Hidden,null):t.state.inputBlocking.top||t.state.inputBlocking.side?n.createElement(l.Blocked,{blocking:t.state.inputBlocking}):n.createElement(l.Input,{context:t}),n.createElement("div",{id:"cyoag-main-column"},n.createElement(i.Node,{context:t}),e,n.createElement(c.Paths,{context:t}),a)}});t.MainColumn=u,e.exports=t},function(e,t,a){function n(){f.debug("Checking session status . . .");var e=new XMLHttpRequest,t=this;e.onreadystatechange=function(){if(4!=e.readyState||200!=e.status&&304!=e.status)f.debug("Initial cookie check yielded HTTP response status: "+e.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Cookie check response payload: "+e.responseText);var a=JSON.parse(e.responseText);p(t,a)}},e.open("POST","/session"),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.timeout=5e3,e.ontimeout=function(){e.abort(),t.setState({error:"Server response timed out; unable to detect your login status."})},e.send()}function o(){f.debug("Logging out current user . . .");var e=new XMLHttpRequest,t=this;e.onreadystatechange=function(){if(4!=e.readyState||200!=e.status&&304!=e.status)f.debug("Logout attempt yielded HTTP response status: "+e.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Logout response payload: "+e.responseText);var a=JSON.parse(e.responseText);p(t,a)}},e.open("GET","/session/logout"),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.timeout=5e3,e.ontimeout=function(){e.abort(),t.setState({error:"Server response timed out; unable to detect your login status."})},e.send()}function r(e){if(null==e)return void f.error("Missing node ID in navigation attempt.");f.debug("User attempting to navigate story nodes . . .");var t=new XMLHttpRequest,a=this;t.onreadystatechange=function(){if(4!=t.readyState||200!=t.status&&304!=t.status)f.debug("Navigation attempt yielded HTTP response status: "+t.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Navigation response payload: "+t.responseText);var e=JSON.parse(t.responseText);p(a,e)}},t.open("POST","/session"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.timeout=5e3,t.ontimeout=function(){t.abort(),a.setState({error:"Server response timed out; unable to detect your login status."})};var n=JSON.stringify({navigate:e});t.send(n)}function i(e,t){if(null==e||null==t)return void f.error("Relevant parameters missing in votification call.");f.debug("User attempting to votify a story node . . .");var a=new XMLHttpRequest,n=this;a.onreadystatechange=function(){if(4!=a.readyState||200!=a.status&&304!=a.status)f.debug("Votification attempt yielded HTTP response status: "+a.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Votification response payload: "+a.responseText);var e=JSON.parse(a.responseText);u(n,e)}},a.open("POST","/session"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.timeout=5e3,a.ontimeout=function(){a.abort(),n.setState({error:"Server response timed out; unable to detect result of votification attempt."})};var o=JSON.stringify({votify:e,newVote:t});a.send(o)}function s(e){f.debug("User attempting to update their name . . .");var t=new XMLHttpRequest,a=this;t.onreadystatechange=function(){if(4!=t.readyState||200!=t.status&&304!=t.status)f.debug("Name change attempt yielded HTTP response status: "+t.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Name change response payload: "+t.responseText);var e=JSON.parse(t.responseText);p(a,e)}},t.open("POST","/session"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.timeout=5e3,t.ontimeout=function(){t.abort(),a.setState({error:"Server response timed out; unable to detect result of name change attempt."})};var n=JSON.stringify({newName:e});t.send(n)}function c(e,t){f.debug("User attempting to submit new node . . .");var a=new XMLHttpRequest,n=this;a.onreadystatechange=function(){if(4!=a.readyState||200!=a.status&&304!=a.status)f.debug("Node submission attempt yielded HTTP response status: "+a.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Node submission response payload: "+a.responseText);var e=JSON.parse(a.responseText);p(n,e)}},a.open("POST","/session"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.timeout=5e3,a.ontimeout=function(){a.abort(),n.setState({error:"Server response timed out; unable to detect result of node submission attempt."})};var o=JSON.stringify({newNodePath:e,newNodeBody:t});a.send(o)}function l(e,t){f.debug("User attempting to save draft . . .");var a=new XMLHttpRequest,n=this;a.onreadystatechange=function(){if(4!=a.readyState||200!=a.status&&304!=a.status)f.debug("Draft salvation attempt yielded HTTP response status: "+a.status);else{f.debug("Status 200 (or 304)!"),f.verbose("Draft salvation response payload: "+a.responseText);var e=JSON.parse(a.responseText);p(n,e)}},a.open("POST","/session"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.timeout=5e3,a.ontimeout=function(){a.abort(),n.setState({error:"Server response timed out; unable to verify that your draft was saved."})};var o=JSON.stringify({draftPath:e,draftBody:t});a.send(o)}function u(e,t){if(!d(e,t)){if(f.debug("Attempting to validate votification response from server . . ."),!t){var a="Got no valid response object from server whatsoever.";return f.error(a),void e.setState(g(a))}if(t.error)return f.error(t.error),void e.setState(g(t.error));if(!t.hasOwnProperty("votification")||t.votification!=v.votificationNone&&t.votification!=v.votificationUp&&t.votification!=v.votificationDown){var a="Could not retrieve new votification status from the server.";return f.error(a),void e.setState(g(a))}f.verbose("Trying to set state after validation: "+JSON.stringify(t)),e.setState({votification:t.votification,msg:t.msg?t.msg:null,warning:t.warning?t.warning:null,error:t.error?t.error:null}),f.verbose("State was set successfully after validation!"),f.verbose("New state: "+JSON.stringify(e.state))}}function p(e,t){if(!d(e,t)){if(f.debug("Attempting to validate response from server . . ."),!t){var a="Got no valid response object from server whatsoever.";return f.out(a),void e.setState(g(a))}if(t.error)return f.out(t.error),void e.setState(g(t.error));if(!t.hasOwnProperty("nodeUid")){var a="Could not get story node data from server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("parentUid")){var a="Could not retrieve node lineage data from server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("acctType")){var a="Could not get user account type from server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("userName")){var a="Could not get user data from server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("votification")||t.votification!=v.votificationNone&&t.votification!=v.votificationUp&&t.votification!=v.votificationDown){var a="Could not retrieve votification status from the server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("paths")){var a="Could not retrieve pathing information from server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("snippet")){var a="Could not retrieve snippet data from server.";return f.out(a),void e.setState(g(a))}if(!(t.snippet.hasOwnProperty("trailingSnippet")&&t.snippet.hasOwnProperty("lastPath")&&t.snippet.hasOwnProperty("nodeSnippet")&&t.snippet.hasOwnProperty("authorName"))){var a="Some snippet details were missing in response from server.";return f.out(a),void e.setState(g(a))}if(!t.hasOwnProperty("inputBlocking")){var a="Could not retrieve input permissions from server.";return f.out(a),void e.setState(g(a))}if(!t.inputBlocking.hasOwnProperty("top")||!t.inputBlocking.hasOwnProperty("side")){var a="Path authorship details were missing in response from server.";return f.out(a),void e.setState(g(a))}f.verbose("Trying to set state after validation: "+JSON.stringify(t)),e.setState({nodeUid:t.nodeUid,parentUid:t.parentUid,userName:t.userName,acctType:t.acctType,votification:t.votification,snippet:t.snippet,paths:t.paths,inputBlocking:t.inputBlocking,msg:t.msg?t.msg:null,warning:t.warning?t.warning:null,error:t.error?t.error:null}),f.verbose("State was set successfully after validation!"),f.verbose("New state: "+JSON.stringify(e.state))}}function d(e,t){return!!t.messageOnly&&(f.verbose("Got message-only response."),e.setState({msg:null,warning:null,error:null}),e.setState({msg:t.msg?t.msg:null,warning:t.warning?t.warning:null,error:t.error?t.error:null}),!0)}function m(){return{nodeUid:v.defaultNodeUid,parentUid:v.defaultParentUid,userName:v.defaultUserName,acctType:v.acctTypeVisitor,votification:v.votificationNone,snippet:{trailingSnippet:v.defaultTrailingSnippet,lastPath:v.defaultLastPath,nodeSnippet:v.defaultNodeSnippet,authorName:v.displayNameUnknown},paths:[],inputBlocking:v.inputBlockingHide,msg:null,warning:null,error:null}}function g(e){return{nodeUid:v.errorNodeUid,parentUid:v.errorNodeUid,userName:v.errorUserName,acctType:v.acctTypeVisitor,votification:v.votificationNone,snippet:{trailingSnippet:v.errorTrailingSnippet,lastPath:v.errorLastPath,nodeSnippet:v.errorNodeSnippet+"  "+e,authorName:v.displayNameUnknown},paths:[],inputBlocking:v.inputBlockingHide,msg:null,warning:null,error:e}}var h=a(2),y=(a(3),a(5)),v=a(4),f=a(1)("MainComponent.js"),b=a(8),E=a(13),C=a(10),S=a(12),w=a(7),N=h.createClass({displayName:"MainComponent",componentDidMount:n,getInitialState:m,inputSubmit:c,logoutRequest:o,message:function(e){this.setState({msg:e.msg?e.msg:null,warning:e.warning?e.warning:null,error:e.error?e.error:null})},nameChange:s,navigate:r,render:function(){f.verbose("Rendering...");var e={};e.state=this.state,e.inputSubmit=this.inputSubmit,e.logoutRequest=this.logoutRequest,e.message=this.message,e.nameChange=this.nameChange,e.navigate=this.navigate,e.saveDraft=this.saveDraft,e.votify=this.votify;var t=function(){return y.DEBUG?h.createElement("div",{id:"cyoag-debug-state-display"},h.createElement("br",null),h.createElement("hr",null),h.createElement("h4",null,"Debug mode enabled! Current app state:"),h.createElement("hr",null),JSON.stringify(e.state)):h.createElement("div",{id:"cyoag-debug-state-display"})}();return h.createElement("div",{id:"cyoag-react-container"},h.createElement(b.Header,null),h.createElement(E.Banner,{context:e}),h.createElement("div",{id:"cyoag-columns"},h.createElement(S.MarginColumn,{context:e}),h.createElement(C.MainColumn,{context:e})),h.createElement(w.Footer,null),t,h.createElement(E.Modal,{context:e}))},saveDraft:l,votify:i});e.exports=N},function(e,t,a){var n=a(2),o=(a(3),a(4)),r=a(1)("MarginColumnComponents.js"),i=a(6),t={},s=n.createClass({displayName:"MarginColumn",render:function(){r.verbose("Rendering...");var e,t=this.props.context;return e=t.state.acctType!=o.acctTypeVisitor?n.createElement(l,{context:t,logoutRequest:t.logoutRequest}):n.createElement(c,null),n.createElement("div",{id:"cyoag-margin-column"},e)}}),c=n.createClass({displayName:"MarginLogin",render:function(){return n.createElement("div",{id:"cyoag-margin-login-container"},n.createElement("h4",null,"Login with:"),n.createElement(i.FacebookButton,null)," ",n.createElement(i.TwitterButton,null))}}),l=n.createClass({displayName:"MarginLogout",render:function(){var e=this.props.context,t=e.state.userName;return t=t.replace("-","â€‘"),n.createElement("div",{id:"cyoag-margin-login-container"},n.createElement("h4",null,"Logged in!"),n.createElement("p",null,"Welcome, ",t,"!"),n.createElement(u,{context:e}),n.createElement(i.LogoutButton,{logoutRequest:this.props.logoutRequest}))}}),u=n.createClass({displayName:"NameChangeComponent",componentDidUpdate:function(){var e=document.getElementById("cyoag-name-input");e&&e.focus()},getInitialState:function(){return{nameChange:"beg"}},render:function(){this.props.context;return"beg"==this.state.nameChange?n.createElement("div",{id:"cyoag-name-change-ui"},n.createElement("button",{id:"cyoag-swap-name-change-button",onClick:this.swap},"Customize Your Name")):"ui"==this.state.nameChange?n.createElement("div",{id:"cyoag-name-change-ui"},n.createElement("input",{id:"cyoag-name-input",onKeyUp:this.validate,type:"text",placeholder:"New name"}),n.createElement("button",{id:"cyoag-submit-name-change-button",onClick:this.submit},"Submit")):n.createElement("div",{id:"cyoag-name-change-ui"})},submit:function(){this.validate();var e=document.getElementById("cyoag-name-input").value;return e.length<3?void this.props.context.message({warning:"Your custom name must have at least 3 characters in it."}):(this.props.context.nameChange(e),void this.swap())},swap:function(){"beg"==this.state.nameChange?this.setState({nameChange:"ui"}):"ui"==this.state.nameChange&&this.setState({nameChange:"beg"})},validate:function(){var e=document.getElementById("cyoag-name-input").value;(e.length>16||e.match(/-{2,}/)||e.match(/[^a-zA-Z0-9-]/))&&(document.getElementById("cyoag-name-input").value=e.substring(0,16).replace(/-{2,}/g,"-").replace(/[^a-zA-Z0-9-]/g,""))}});t.MarginColumn=s,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4)),r=a(1)("MessagingComponents.js"),t={},i=n.createClass({displayName:"Banner",closeBanner:function(e){e.preventDefault();var t=document.getElementById("cyoag-message-banner");t&&(t.style.display="none")},render:function(){r.verbose("Rendering...");var e,t,a=this.props.context.state,i=document.getElementById("cyoag-message-banner");if(a.error)i&&(i.style.display="block"),e=o.messageErrorClass,t=a.error;else if(a.warning)i&&(i.style.display="block"),e=o.messageWarningClass,t=a.warning;else{if(!a.msg)return n.createElement("div",{id:"cyoag-message-banner",style:{display:"none"}});i&&(i.style.display="block"),e=o.messageRegularClass,t=a.msg}return n.createElement("div",{id:"cyoag-message-banner"},n.createElement("p",{className:e},n.createElement("a",{onClick:this.closeBanner,id:"cyoag-message-banner-x",href:"#"},"x"),t))}}),s=n.createClass({displayName:"Modal",closeModal:function(e){e.preventDefault();var t=document.getElementById("cyoag-modal-message-container");t&&(t.style.display="none")},render:function(){r.verbose("Rendering...");var e,t,a=this.props.context.state,i=document.getElementById("cyoag-modal-message-container");if(a.error)i&&(i.style.display="block"),e=o.modalTypeError,t=a.error;else if(a.warning)i&&(i.style.display="block"),e=o.modalTypeWarning,t=a.warning;else{if(!a.msg)return n.createElement("div",{id:"cyoag-message-modal",style:{display:"none"}});i&&(i.style.display="block"),e=o.modalTypeMessage,t=a.msg}return n.createElement("div",{id:"cyoag-modal-message-container"},n.createElement("div",{id:"cyoag-modal-message-overlay"}),n.createElement("div",{id:"cyoag-message-modal",className:e},n.createElement("p",{className:"cyoag-modal-message"},t),n.createElement("a",{onClick:this.closeModal,className:"cyoag-link",href:"#"},n.createElement("div",{className:"cyoag-modal-message-button"},"Click to Acknowledge"))))}});t.Banner=i,t.Modal=s,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4),a(1)("NodeComponents.js")),r=a(18),t={},i=n.createClass({displayName:"Node",navigate:function(){o.debug("^ ^ ^ ^ ^ Navigating to parent."),this.props.context.navigate(this.props.context.state.parentUid)},render:function(){o.verbose("Rendering...");var e=this.props.context,t=e.state.snippet,a="node-"+e.state.parentUid;return n.createElement("div",{id:"cyoag-node-container"},n.createElement("a",{id:a,className:"cyoag-trailing-snippet-link cyoag-div-link",href:"#",onMouseMove:this.locateTooltip},n.createElement("div",{className:"cyoag-path-item cyoag-trailing-snippet",onClick:this.navigate},t.trailingSnippet.split("\n").map(function(e){return n.createElement("p",{key:r(),className:"cyoag-snippet-paragraph"},e)})),n.createElement("div",{id:"cyoag-tooltip-regress"},"Back whence you came . . . ?")),n.createElement("p",{id:"cyoag-last-path"},t.lastPath),n.createElement("div",{id:"cyoag-node-snippet"},t.nodeSnippet.split("\n").map(function(e){return n.createElement("p",{key:r(),className:"cyoag-snippet-paragraph"},e)})),n.createElement("p",{id:"cyoag-author-attribution",className:"cyoag-note"},"Contribution by user ",t.authorName))},locateTooltip:function(e){var t=document.querySelector("#cyoag-tooltip-regress");t.style.top=e.clientY+pageYOffset+"px",t.style.left=e.clientX+pageXOffset+"px"}});t.Node=i,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4),a(1)("PathComponents.js")),t={},r=n.createClass({displayName:"Paths",navigate:function(e){var t=e.substring(5);this.props.context.navigate(t)},render:function(){o.verbose("Rendering...");var e=this,t=this.props.context,a=t.state.paths;return 0==a.length?n.createElement("div",{id:"cyoag-path-list"},"No paths yet lead from this chapter."):n.createElement("div",{id:"cyoag-path-list"},n.createElement("p",{className:"italics sans-serif"},"What happens next . . . ?"),a.map(function(t){var a="node-"+t.pathUid;return n.createElement("a",{id:a,key:a,className:"cyoag-path-item-link cyoag-div-link",href:"#",onMouseMove:e.locateTooltip.bind(null,a)},n.createElement("div",{className:"cyoag-path-item",onClick:e.navigate.bind(null,a)},t.pathSnippet),n.createElement("div",{className:"cyoag-tooltip-progress"},"Choose wisely . . ."))}))},locateTooltip:function(e,t){var a=document.querySelector("#"+e+" .cyoag-tooltip-progress");a.style.top=t.clientY+pageYOffset+"px",a.style.left=t.clientX+pageXOffset+"px"}});t.Paths=r,e.exports=t},function(e,t,a){var n=a(2),o=(a(3),a(4)),r=a(1)("VotificationComponents.js"),i=a(6),t={},s=n.createClass({displayName:"BegLogin",render:function(){r.verbose("Rendering...");var e=this.props.context;if(e.state.acctType==o.acctTypeVisitor)return n.createElement("div",{id:"cyoag-votification-container"},n.createElement("h4",null,"Register to save your position, contribute your own story snippets, and gain voting rights!"),n.createElement(i.FacebookButton,null),n.createElement(i.TwitterButton,null))}}),c=n.createClass({displayName:"Votification",render:function(){r.verbose("Rendering...");var e,t,a,i,s=this.props.context;switch(s.state.votification){case"up":e="images/upLit.png",t="images/down.png",a=o.votificationNone,i=o.votificationDown;break;case"down":e="images/up.png",t="images/downLit.png",a=o.votificationUp,i=o.votificationNone;break;default:e="images/up.png",t="images/down.png",a=o.votificationUp,i=o.votificationDown}var c=function(){r.verbose("Client trying to upvote "+s.state.nodeUid),s.votify(s.state.nodeUid,a)},l=function(){r.verbose("Client trying to downvote "+s.state.nodeUid),s.votify(s.state.nodeUid,i)};return n.createElement("div",{id:"cyoag-votification-container"},n.createElement("h4",null,"How did you like this chapter?"),n.createElement("a",{href:"#"},n.createElement("img",{id:"cyoag-upvote-button",onClick:c,src:e})),n.createElement("a",{href:"#"},n.createElement("img",{id:"cyoag-downvote-button",onClick:l,src:t})))}});t.BegLogin=s,t.Votification=c,e.exports=t},function(e,t){var a={};a.SQL_USER="cyoag",a.SQL_PASS="^cy0cy0Acer",a.FB_APP_ID="1186913218035172",a.FB_APP_SECRET="c035050ae6fd804546324a10aa49b304",a.TW_KEY="uvhrxDCLSVNlyLGgHGwCBzxqT",a.TW_SECRET="M5WEIkyStvKQ2zkJbXZyxoc1g9FIV7MphTimpJmNJWgW0rzVgy",a.httpsPrivKeyLocation="/etc/letsencrypt/live/cyoag.com/privkey.pem",a.httpsFullChainLocation="/etc/letsencrypt/live/cyoag.com/fullchain.pem",a.httpsChainLocation="/etc/letsencrypt/live/cyoag.com/chain.pem",a.httpsPrivKeyLocation_local="./digital-ocean/server.key",a.httpsFullChainLocation_local="./digital-ocean/server.crt",a.httpsChainLocation_local="./digital-ocean/server.crt",e.exports=a},function(e,t){function a(e,t){return Math.floor(Math.random()*(t-e))+e}function n(){for(var e=[],t=5+a(5,11),n=t+a(5,11),r=n+a(5,11),i=0;i<40;i++)if(i==t||i==n||i==r)e.push("-");else{var s=a(0,62);e.push(o.charAt(s))}var c=e.join("");return console.log("Made uid of length "+c.length+": "+c),c}var o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";e.exports=n}]);